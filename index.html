<!doctype html>
<html lang="en" className="scroll-smooth" class="dark">
	<head>
		<meta charset="utf-8" />
		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
		<meta content="width=device-width, initial-scale=1" name="viewport" />

		<meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff" />
		<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000" />
		<link rel="icon" href="./favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="./_app/immutable/assets/Footer.tflIp9SK.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.WbSJy2CG.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/entry.CfrVof0O.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/scheduler.CO5KZ6rK.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.D3UXxyEl.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.73SDJlB_.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.C40aKBAX.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/2.BQJuzwVU.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Footer.DrSYLyAD.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/each.D6YF6ztN.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/config.CElJ84Ba.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/SocialIcons.DFOFZu5m.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/arrowleft.mCawO3_V.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/4.DC6K6UT7.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Head.BCIx_dDN.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/stores.BDR8H195.js"><title>parths.live</title><!-- HEAD_svelte-yipvbd_START --><link rel="icon" type="image/png" href="/favicon.png"><meta name="description" content="parths.live"><meta name="author" content="Parth Shah"><meta property="og:title" content="parths.live"><meta property="og:description" content="parths.live"><meta property="og:url" content="http://sveltekit-prerender/"><meta property="og:type" content="website"><meta property="og:image" content="/favicon.png"><meta property="og:image:alt" content="parths.live"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><!-- HEAD_svelte-yipvbd_END -->
	</head>
	<!-- Body class how it looks by default out of the box for svelte -->
	<!-- <body data-sveltekit-preload-data="hover"> -->
		<body class="bg-gradient-to-b from-slate-200 to-slate-400 bg-white text-black antialiased dark:bg-gradient-to-b dark:from-neutral-900 dark:to-neutral-800 dark:text-white" data-sveltekit-prefetch>
		<div style="display: contents">  <div class="mx-auto my-auto px-6 lg:max-w-3xl">  <div class="flex flex-nowrap min-h-dvh flex-col justify-between">  <header class="flex items-center justify-between py-5"> <div class="relative inline-flex group" data-svelte-h="svelte-1vpvahn">  <div class="absolute transition-all duration-1000 opacity-0 -inset-px bg-gradient-to-r from-lime-600 via-emrald-600 to-lime-600 blur-md group-hover:opacity-100 group-hover:-inset-1 group-hover:duration-200 animate-tilt"></div>  <div><a href="/" aria-label="HomePage" class="relative inline-flex items-center justify-center transition-all duration-600 bg-slate-900 rounded-xl focus:ring-slate-900" role="button"><img src="/favicon.png" alt="Logo" class="h-8 w-auto"></a></div></div>   <div class="hidden sm:block"><a href="/about" class="p-1 font-medium sm:p-2 text-neutral-400">About </a><a href="/notes" class="p-1 font-medium sm:p-2 text-neutral-400">Notes </a></div></header>  <main class="mb-auto"><div>    <div class="inline-grid"> <div class="inline-flex flex-col rounded-md mt-16 mb-5"><div class="relative inline-flex"> <div class="absolute blur-3xl inset-20 bg-limeag rounded-md"></div>  <div class="absolute rounded-md overflow-hidden before:absolute before:top-[-70%] before:right-[-70%] before:bottom-[-70%] before:left-[-70%] before:bg-[conic-gradient(transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,#9ecd60)] before:animate-spin-slow -inset-px" data-svelte-h="svelte-1atxlcy"></div>  <div class="relative inline-flex flex-col rounded-md bg-neutral-900 p-5"><h1 class="text-neutral-300" data-svelte-h="svelte-1tg4nht">Hi, I&#39;m Parth.</h1> <p class="text-neutral-300 my-3" data-svelte-h="svelte-up23fs">I currently work as a Site Reliability Engineer (SRE). I love to build software backend solutions and optimize them for high reliability and availability.
          My work experience spans across domains including - supply chain, satellite internet, self-driving cars and GPU hyperscaler.</p> <p class="text-neutral-300 my-2" data-svelte-h="svelte-mxr0nz">My current tech stack includes:</p> <ul class="text-neutral-300 ml-2" data-svelte-h="svelte-m6c4ew"><li><p><b>Backend</b>: Go, Python3</p></li> <li><p><b>Observability</b>: Open telemetry, LGTM stack</p></li> <li><p><b>Infrastructure</b>: Kubernetes, Terraform (IaaC)</p></li> <li><p><b>Cloud</b>: GCP, AWS</p></li> <li><p><b>CI/CD</b>: ArgoCD</p></li> <li><p><b>Frontend</b>: SvelteKit, Tailwindcss, JS</p></li></ul> <div class="mt-6 flex w-full justify-end"><a class="flex gap-x-10 text-gray-400 transition hover:text-limeag" href="/about">  <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-arrow-right-square-fill" viewBox="0 0 16 16"><path d="M0 14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2zm4.5-6.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5a.5.5 0 0 1 0-1"></path></svg> <span></span></a></div></div></div></div>   <div class="inline-flex flex-col rounded-md mt-20 mb-5"><div class="relative inline-flex"><div class="absolute blur-3xl inset-20 bg-limeag rounded-md"></div> <div class="absolute rounded-md overflow-hidden before:absolute before:top-[-120%] before:right-[-120%] before:bottom-[-120%] before:left-[-120%] before:bg-[conic-gradient(transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,transparent,#9ecd60)] before:animate-spin-slow -inset-px" data-svelte-h="svelte-z92fz8"></div> <div class="relative inline-flex flex-col rounded-md bg-neutral-900 p-5 w-full"><h1 class="text-neutral-300" data-svelte-h="svelte-1g7v3v4">Recent notes</h1> <p class="text-neutral-300 my-2 mt-3" data-svelte-h="svelte-u910mo">Here&#39;s what I&#39;ve been up to lately. You will find a list of my journal entries on
            various topics. I like to simply call them notes. Happy reading!</p> <div class="flex mt-4"><ul class="text-neutral-300 ml-2 space-y-1"><a class="flex flex-row" href="/notes/LocalArgocd"><li class="flex flex-row"><p><b>2024-06-14</b></p> <p class="ml-3">Running ArgoCD locally</p> <p class="ml-1">
                        [ <b><i>#argocd</i></b>,  <b><i>#localtesting</i></b>] </p></li> </a><a class="flex flex-row" href="/notes/Localkindcluster"><li class="flex flex-row"><p><b>2024-04-23</b></p> <p class="ml-3">Kind on local machine</p> <p class="ml-1">
                        [ <b><i>#containers</i></b>,  <b><i>#k8s</i></b>,  <b><i>#kind</i></b>] </p></li> </a><a class="flex flex-row" href="/notes/MultisortInGo"><li class="flex flex-row"><p><b>2023-12-13</b></p> <p class="ml-3">Multi sort in Go</p> <p class="ml-1">
                        [ <b><i>#go</i></b>,  <b><i>#multisort</i></b>] </p></li> </a><a class="flex flex-row" href="/notes/Helloworld"><li class="flex flex-row"><p><b>2023-12-01</b></p> <p class="ml-3">Hello world!</p> <p class="ml-1">
                        [ <b><i>#foobar</i></b>,  <b><i>#sveltekit</i></b>,  <b><i>#tailwindcss</i></b>] </p></li> </a></ul></div> <div class="mt-6 flex w-full justify-end"><a class="flex gap-x-10 text-gray-400 transition hover:text-limeag" href="/notes">  <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-arrow-right-square-fill" viewBox="0 0 16 16"><path d="M0 14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2zm4.5-6.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5a.5.5 0 0 1 0-1"></path></svg> <span></span></a></div></div></div></div></div></div></main> <footer><div class="mt-5 flex flex-col items-center pt-6 gap-2"><div class="mb-3 flex space-x-2"><a class="flex gap-x-10 text-gray-400 transition hover:text-limeag" href="https://github.com/parthrs">  <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"></path></svg> <span></span></a> <a class="flex gap-x-10 text-gray-400 transition hover:text-limeag" href="https://linkedin.com/in/parthrs">  <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"></path></svg> <span></span></a> <a class="flex gap-x-10 text-gray-400 transition hover:text-limeag" href="mailto:tuna-whistle-0c@icloud.com">  <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-at" viewBox="0 0 16 16"><path d="M13.106 7.222c0-2.967-2.249-5.032-5.482-5.032-3.35 0-5.646 2.318-5.646 5.702 0 3.493 2.235 5.708 5.762 5.708.862 0 1.689-.123 2.304-.335v-.862c-.43.199-1.354.328-2.29.328-2.926 0-4.813-1.88-4.813-4.798 0-2.844 1.921-4.881 4.594-4.881 2.735 0 4.608 1.688 4.608 4.156 0 1.682-.554 2.769-1.416 2.769-.492 0-.772-.28-.772-.76V5.206H8.923v.834h-.11c-.266-.595-.881-.964-1.6-.964-1.4 0-2.378 1.162-2.378 2.823 0 1.737.957 2.906 2.379 2.906.8 0 1.415-.39 1.709-1.087h.11c.081.67.703 1.148 1.503 1.148 1.572 0 2.57-1.415 2.57-3.643zm-7.177.704c0-1.197.54-1.907 1.456-1.907.93 0 1.524.738 1.524 1.907S8.308 9.84 7.371 9.84c-.895 0-1.442-.725-1.442-1.914"></path></svg> <span></span></a></div> <div class="hidden sm:block space-x-2 text-sm text-neutral-500 dark:text-neutral-400" data-svelte-h="svelte-1p5cfkh"><p>Made by me using <a class="text-neutral-400 webpagelevellink" href="https://kit.svelte.dev/">SvelteKit</a> and <a class="text-neutral-400 webpagelevellink" href="https://tailwindcss.com/">tailwindcss</a> <b>|</b>  <a class="text-neutral-400 webpagelevellink" href="/madewith">Made with</a> </p></div> <div class="hidden sm:block mb-2 text-neutral-500"><p>The views expressed here are my own and are not affiliated with my current or former employers</p></div></div></footer></div></div> 
			
			<script>
				{
					__sveltekit_h1urct = {
						base: new URL(".", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,null,{"type":"data","data":{posts:[{title:"Running ArgoCD locally",date:"2024-06-14",draft:false,summary:"Run and test ArgoCD on your local machine",tags:["argocd","localtesting"],type:"post",content:"\u003Cp data-svelte-h=\"svelte-hzerox\">I recently found the need to stand up a local instance of \u003Ca href=\"https://argo-cd.readthedocs.io/en/stable/\" rel=\"nofollow\">ArgoCD\u003C/a>. By local I mean running on my personal machine. The primary goal was to learn ArgoCD while testing the deployment of an application. The most challenging part of this effort was presenting a git repo on the host machine to the local ArgoCD instance, which it then monitors for any app config changes.\u003C/p> \u003Cp data-svelte-h=\"svelte-f0kqi9\">Here are the overall steps:\u003C/p> \u003Cul data-svelte-h=\"svelte-k8f8vs\">\u003Cli>- Establish a local git repo\u003C/li> \u003Cli>- Set up a local K8s cluster\u003C/li> \u003Cli>- Stand up the ArgoCD instance\u003C/li> \u003Cli>- Deploy the application (via git repo)\u003C/li>\u003C/ul> \u003Ch2 data-svelte-h=\"svelte-4sbb5r\">My Local machine (specs that matter)\u003C/h2> \u003Cp data-svelte-h=\"svelte-knkh8c\">\u003Cstrong>OS\u003C/strong>: MacOS Sonoma\u003Cbr> \u003Cstrong>Processor Arch\u003C/strong>: Apple Silicon (M1, i.e. 64-bit ARM)\u003C/p> \u003Ch2 data-svelte-h=\"svelte-1e01thj\">Local git repo\u003C/h2> \u003Cp data-svelte-h=\"svelte-1qwdk8n\">On my machine I’m using this as the root directory for all the following configuration: \u003Ccode>/Users/parth/Documents/Dev/k8s/local-argocd/\u003C/code>\u003C/p> \u003Cp data-svelte-h=\"svelte-ihztnf\">Create our \u003Ccode>foo\u003C/code> repo:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token builtin class-name\">cd\u003C/span> /Users/Parth/Dev/k8s/local-argo\n\u003Cspan class=\"token function\">mkdir\u003C/span> foo-repo\n\u003Cspan class=\"token builtin class-name\">cd\u003C/span> foo-repo\n\u003Cspan class=\"token function\">git\u003C/span> init\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-kc08im\">We’ll come back to this towards this end.\u003C/p> \u003Ch2 data-svelte-h=\"svelte-1oxt60p\">Local K8s cluster\u003C/h2> \u003Cp data-svelte-h=\"svelte-1mwyjba\">I’m using Kind to create a basic Kubernetes cluster. You can find an earlier post on installing Kind and other pre-requisites \u003Ca href=\"/notes/Localkindcluster\">here\u003C/a>. This cluster would run both the ArgoCD instance and our test application in separate namespaces.\u003C/p> \u003Cp data-svelte-h=\"svelte-1jqvx2b\">I used a simple, single node cluster to run both the control plane and worker functions. The reason for this was the simplicity of storage. In a multi-node setup, presenting the same host directory on multiple nodes would be a complexity I didn’t feel was worth undertaking for this exercise.\u003C/p> \u003Cp data-svelte-h=\"svelte-mggp6e\">Cluster configuration:\u003C/p> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># /Users/parth/Documents/Dev/k8s/local-argocd/kind-config.yaml\u003C/span>\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Cluster\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> kind.x\u003Cspan class=\"token punctuation\">-\u003C/span>k8s.io/v1alpha4\n\u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> local\u003Cspan class=\"token punctuation\">-\u003C/span>argocd\n\u003Cspan class=\"token key atrule\">nodes\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">role\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> control\u003Cspan class=\"token punctuation\">-\u003C/span>plane\n    \u003Cspan class=\"token key atrule\">kubeadmConfigPatches\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token punctuation\">|\u003C/span>\u003Cspan class=\"token scalar string\">\n      kind: InitConfiguration\n      nodeRegistration:\n        kubeletExtraArgs:\n          node-labels: \"ingress-ready=true\"\u003C/span>\n    \u003Cspan class=\"token key atrule\">extraPortMappings\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">containerPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">80\u003C/span>\n      \u003Cspan class=\"token key atrule\">hostPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">80\u003C/span>\n      \u003Cspan class=\"token key atrule\">protocol\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> TCP\n    \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">containerPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">443\u003C/span>\n      \u003Cspan class=\"token key atrule\">hostPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">443\u003C/span>\n      \u003Cspan class=\"token key atrule\">protocol\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> TCP\n    \u003Cspan class=\"token key atrule\">extraMounts\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">hostPath\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> /Users/Parth/Dev/local\u003Cspan class=\"token punctuation\">-\u003C/span>argo/foo\u003Cspan class=\"token punctuation\">-\u003C/span>repo\n        \u003Cspan class=\"token key atrule\">containerPath\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> /tmp/foo\u003Cspan class=\"token punctuation\">-\u003C/span>repo\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cul data-svelte-h=\"svelte-11h6fge\">\u003Cli>The \u003Ccode>kubeadmConfigPatches\u003C/code> section is passing a \u003Ccode>InitConfiguration\u003C/code> to our kind cluster which specifies extra args. These will allow us to set up the ingress that makes the GUI accessible on port 443.\u003C/li> \u003Cli>We are presenting the local git repo to the node in our configuration and mounting it to the path \u003Ccode>/tmp/foo-repo\u003C/code> on the node. Recall that our node is essentially a container.\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-pvrggb\">Create the cluster using this config:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">kind create cluster \u003Cspan class=\"token parameter variable\">--config\u003C/span> /Users/parth/Documents/Dev/k8s/local-argocd/kind-config.yaml\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-172ncxp\">\u003Cimg src=\"/kind-local-argocd-cluster-creation.png\" alt=\"kind cluster creation\">\u003C/p> \u003Ch2 data-svelte-h=\"svelte-zklhth\">Stand up ArgoCD\u003C/h2> \u003Cp data-svelte-h=\"svelte-1bok41v\">Deploying ArgoCD on this local cluster is the following three simple commands:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">kubectl create namespace argocd\nkubectl apply \u003Cspan class=\"token parameter variable\">-n\u003C/span> argocd \u003Cspan class=\"token parameter variable\">-f\u003C/span> https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml\nkubectl apply \u003Cspan class=\"token parameter variable\">-f\u003C/span> https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/provider/kind/deploy.yaml\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cul data-svelte-h=\"svelte-1ow3ww5\">\u003Cli>First, we create the namespace called \u003Ccode>argocd\u003C/code>\u003C/li> \u003Cli>Next, the argocd controller in the created \u003Ccode>argocd\u003C/code> namespace\u003C/li> \u003Cli>Finally, the nginx controller in the created \u003Ccode>argocd\u003C/code> namespace\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-iemft9\">But if you want the GUI accessible on your local HTTPS port create the following ingress deployment using the command \u003Ccode>kubectl apply -f /Users/parth/Documents/Dev/k8s/local-argocd/argo-ingress.yaml\u003C/code>:\u003C/p> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># /Users/parth/Documents/Dev/k8s/local-argocd/argo-ingress.yaml\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> networking.k8s.io/v1\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Ingress\n\u003Cspan class=\"token key atrule\">metadata\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\u003Cspan class=\"token punctuation\">-\u003C/span>server\u003Cspan class=\"token punctuation\">-\u003C/span>ingress\n  \u003Cspan class=\"token key atrule\">namespace\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\n  \u003Cspan class=\"token key atrule\">annotations\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token key atrule\">kubernetes.io/ingress.class\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> nginx\n    \u003Cspan class=\"token key atrule\">nginx.ingress.kubernetes.io/backend-protocol\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token string\">\"HTTPS\"\u003C/span>\n    \u003Cspan class=\"token key atrule\">alb.ingress.kubernetes.io/ssl-passthrough\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token string\">\"true\"\u003C/span>\n    \u003Cspan class=\"token key atrule\">nginx.ingress.kubernetes.io/force-ssl-redirect\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token string\">\"false\"\u003C/span>\n\u003Cspan class=\"token key atrule\">spec\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">rules\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">host\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> localhost\n    \u003Cspan class=\"token key atrule\">http\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token key atrule\">paths\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">pathType\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Prefix\n        \u003Cspan class=\"token key atrule\">path\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> /\n        \u003Cspan class=\"token key atrule\">backend\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n          \u003Cspan class=\"token key atrule\">service\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n            \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\u003Cspan class=\"token punctuation\">-\u003C/span>server\n            \u003Cspan class=\"token key atrule\">port\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n              \u003Cspan class=\"token key atrule\">number\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">443\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1qntz74\">You should now be able to access the GUI at \u003Ccode>https://localhost\u003C/code>. To get the login password for the GUI (username admin), run:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">kubectl \u003Cspan class=\"token parameter variable\">-n\u003C/span> argocd get secret argocd-initial-admin-secret \u003Cspan class=\"token parameter variable\">-o\u003C/span> \u003Cspan class=\"token assign-left variable\">jsonpath\u003C/span>\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"&#123;.data.password&#125;\"\u003C/span> \u003Cspan class=\"token operator\">|\u003C/span> base64 \u003Cspan class=\"token parameter variable\">-d\u003C/span> \u003Cspan class=\"token operator\">&amp;&amp;\u003C/span> \u003Cspan class=\"token builtin class-name\">echo\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1jlv4bx\">You would need to select ‘Proceed anyways’ for the cert error since we’ve not signed our cert.\u003C/p> \u003Cp data-svelte-h=\"svelte-1tm408y\">To teardown run the following commands:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">kubectl delete \u003Cspan class=\"token parameter variable\">-f\u003C/span> https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/provider/kind/deploy.yaml\nkubectl \u003Cspan class=\"token parameter variable\">-n\u003C/span> argocd delete \u003Cspan class=\"token parameter variable\">-f\u003C/span> https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml\nkubectl delete \u003Cspan class=\"token parameter variable\">-f\u003C/span> /Users/parth/Documents/Dev/k8s/local-argocd/argo-ingress.yaml\nkubectl delete namespace argocd\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1v3jboq\">You can stop here if just getting a local ArgoCD server up and running is your goal. Read on for getting the git repo set up.\u003C/p> \u003Ch2 data-svelte-h=\"svelte-grvw7e\">Deploy an application\u003C/h2> \u003Ch3 data-svelte-h=\"svelte-mvq507\">Kustomize\u003C/h3> \u003Cp data-svelte-h=\"svelte-ouf2gg\">In simple terms, \u003Ca href=\"https://kustomize.io\" rel=\"nofollow\">Kustomize\u003C/a> is a tool that allows you to manipulate Kubernetes resources and objects. For instance, when you use the command \u003Ccode>kubectl edit deployment foo-deployment\u003C/code>, Kustomize is invoked to edit the resource. But it can do more than that as you shall see in a bit.\u003C/p> \u003Cp data-svelte-h=\"svelte-115fbgd\">Here we use Kustomize to manage and modify our resource definitions. Let’s create a few directories under our root directory:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token builtin class-name\">cd\u003C/span> /Users/Parth/Dev/local-argo\n\u003Cspan class=\"token function\">mkdir\u003C/span> \u003Cspan class=\"token parameter variable\">-p\u003C/span> k8s/base\n\u003Cspan class=\"token function\">mkdir\u003C/span> \u003Cspan class=\"token parameter variable\">-p\u003C/span> k8s/overlays/dev\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1vamj07\">The \u003Ccode>base\u003C/code> dir will contain resource definitions that Kustomize will manage. \u003Ccode>overlays\u003C/code> on the other hand will contain modifications (patches) to those resources. Under the \u003Ccode>overlays\u003C/code> you can further group by environments leading to different mods for each env.\u003C/p> \u003Cp data-svelte-h=\"svelte-1e4a15q\">So far, our directory structure looks like this:\u003C/p> \u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">local-argocd\n|-- foo-repo\n|-- k8s\n|   |-- base\n|   |-- overlays/dev\n|-- kind-config.yaml\n|-- argo-ingress.yaml\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-d0imo4\">We will store all the base configuration, much of what we saw so far, like the ingress definition in here. In addition, we’d define a Kustomize specific file that allows it to manage those resources. Move the \u003Ccode>argo-ingress.yaml\u003C/code> file in here. Next, define the following:\u003C/p> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># /Users/Parth/Dev/local-argo/k8s/base/kustomization.yaml\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> kustomize.config.k8s.io/v1beta1\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Kustomization\n\n\u003Cspan class=\"token key atrule\">namespace\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\n\n\u003Cspan class=\"token key atrule\">resources\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n\u003Cspan class=\"token punctuation\">-\u003C/span> https\u003Cspan class=\"token punctuation\">:\u003C/span>//raw.githubusercontent.com/argoproj/argo\u003Cspan class=\"token punctuation\">-\u003C/span>cd/master/manifests/install.yaml\n\u003Cspan class=\"token punctuation\">-\u003C/span> https\u003Cspan class=\"token punctuation\">:\u003C/span>//raw.githubusercontent.com/kubernetes/ingress\u003Cspan class=\"token punctuation\">-\u003C/span>nginx/master/deploy/static/provider/kind/deploy.yaml\n\u003Cspan class=\"token punctuation\">-\u003C/span> argo\u003Cspan class=\"token punctuation\">-\u003C/span>ingress.yaml\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-dah9kq\">The \u003Ccode>resources\u003C/code> section tells Kustomize that we want it to manage the mentioned resources. This includes the controller installation manifests (the individual bash commands we ran earlier) and the ingress deployment.\u003C/p> \u003Cp data-svelte-h=\"svelte-nbfb2a\">You might be thinking as to why we need something like Kustomize at all. The reason, as you’ll see next, is otherwise we’d have to modify the upstream manifests we are calling in our \u003Ccode>resources\u003C/code> section - specifically the ArgoCD instance. Which would be a complicated task.\u003C/p> \u003Cp data-svelte-h=\"svelte-14p4zf\">Now that we have our base configuration defined. Let’s declare the changes we’d want to make on top - we want the ArgoCD instance to see the local directory we have mounted on the node. First we start with the file that tells Kustomize what resource to modify and how. Create this file under \u003Ccode>overlays/dev\u003C/code> (\u003Cstrong>Note\u003C/strong>: This is separate from the \u003Ccode>kustomization.yaml\u003C/code> under base):\u003C/p> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># /Users/Parth/Dev/local-argo/k8s/overlays/dev/kustomization.yaml\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> kustomize.config.k8s.io/v1beta1\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Kustomization\n\n\u003Cspan class=\"token key atrule\">resources\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n\u003Cspan class=\"token punctuation\">-\u003C/span> ../../base\n\u003Cspan class=\"token punctuation\">-\u003C/span> my\u003Cspan class=\"token punctuation\">-\u003C/span>app.yaml\n\n\u003Cspan class=\"token key atrule\">patches\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n\u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">path\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> local\u003Cspan class=\"token punctuation\">-\u003C/span>git\u003Cspan class=\"token punctuation\">-\u003C/span>repo.yaml\n  \u003Cspan class=\"token key atrule\">target\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Deployment\n    \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\u003Cspan class=\"token punctuation\">-\u003C/span>repo\u003Cspan class=\"token punctuation\">-\u003C/span>server\n    \u003Cspan class=\"token key atrule\">namespace\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-t1tm9g\">The \u003Ccode>resources\u003C/code> section tells the resources in scope. The \u003Ccode>my-app.yaml\u003C/code> is our app definition. Pin that aside for now. The \u003Ccode>patches\u003C/code> section tells Kustomize to apply a ‘patch’ to modify our ArgoCD deployment. The path to the patch is in the \u003Ccode>path\u003C/code> field.\u003C/p> \u003Cp data-svelte-h=\"svelte-1917mjx\">Next, define the actual patch:\u003C/p> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># /Users/Parth/Dev/local-argo/k8s/overlays/dev/local-git-repo.yaml\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> apps/v1\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Deployment\n\u003Cspan class=\"token key atrule\">metadata\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\u003Cspan class=\"token punctuation\">-\u003C/span>repo\u003Cspan class=\"token punctuation\">-\u003C/span>server\n\u003Cspan class=\"token key atrule\">spec\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">template\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token key atrule\">spec\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token key atrule\">containers\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\u003Cspan class=\"token punctuation\">-\u003C/span>repo\u003Cspan class=\"token punctuation\">-\u003C/span>server\n        \u003Cspan class=\"token key atrule\">volumeMounts\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n        \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">mountPath\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token string\">'/tmp/foo-repo'\u003C/span> \u003Cspan class=\"token comment\"># path on container\u003C/span>\n          \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> local\u003Cspan class=\"token punctuation\">-\u003C/span>git\u003Cspan class=\"token punctuation\">-\u003C/span>repo\n          \u003Cspan class=\"token key atrule\">readOnly\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token boolean important\">true\u003C/span>\n      \u003Cspan class=\"token key atrule\">volumes\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> local\u003Cspan class=\"token punctuation\">-\u003C/span>git\u003Cspan class=\"token punctuation\">-\u003C/span>repo\n        \u003Cspan class=\"token key atrule\">hostPath\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n          \u003Cspan class=\"token key atrule\">path\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token string\">'/tmp/foo-repo'\u003C/span> \u003Cspan class=\"token comment\"># matches containerPath on node\u003C/span>\n          \u003Cspan class=\"token key atrule\">type\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Directory\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-9hrb95\">This updates the \u003Ccode>argocd-repo-server\u003C/code> container in the ArgoCD deployment, one of the many containers needed to run ArgoCD. This also specifies the host (i.e. the node) path that the container must mount locally (as ReadOnly).\u003C/p> \u003Cp data-svelte-h=\"svelte-1ghxss8\">Finally, we define our foo application:\u003C/p> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># /Users/Parth/Dev/local-argo/k8s/overlays/dev/my-app.yaml\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argoproj.io/v1alpha1\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Application\n\u003Cspan class=\"token key atrule\">metadata\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> my\u003Cspan class=\"token punctuation\">-\u003C/span>app\n  \u003Cspan class=\"token key atrule\">namespace\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> argocd\n\u003Cspan class=\"token key atrule\">spec\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">project\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> default\n  \u003Cspan class=\"token key atrule\">destination\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token key atrule\">namespace\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> my\u003Cspan class=\"token punctuation\">-\u003C/span>app\n    \u003Cspan class=\"token key atrule\">server\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> https\u003Cspan class=\"token punctuation\">:\u003C/span>//kubernetes.default.svc\n  \u003Cspan class=\"token key atrule\">source\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token key atrule\">path\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> apps/test\u003Cspan class=\"token punctuation\">-\u003C/span>app \u003Cspan class=\"token comment\"># source of manifests\u003C/span>\n    \u003Cspan class=\"token key atrule\">repoURL\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token string\">'file:///tmp/foo-repo'\u003C/span>\n    \u003Cspan class=\"token key atrule\">targetRevesion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> HEAD\n  \u003Cspan class=\"token key atrule\">syncPolicy\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token comment\"># Enables auto-sync\u003C/span>\n    \u003Cspan class=\"token comment\"># automated: &#123;&#125;\u003C/span>\n    \u003Cspan class=\"token key atrule\">automated\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token key atrule\">prune\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token boolean important\">true\u003C/span>\n    \u003Cspan class=\"token key atrule\">syncOptions\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> CreateNamespace=true\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-4yxyyr\">Our directory structure looks like this:\u003C/p> \u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">local-argocd\n|-- foo-repo\n|-- k8s\n|   |-- base\n|   |    |-- argo-ingress.yaml\n|   |    |-- kustomization.yaml\n|   |-- overlays/dev\n|        |-- kustomization.yaml\n|        |-- local-git-repo.yaml\n|        |-- my-app.yaml\n|-- kind-config.yaml\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Ch3 data-svelte-h=\"svelte-1fk7144\">Dummy application\u003C/h3> \u003Cp data-svelte-h=\"svelte-1y08tt6\">We’re almost there, hang in there a bit longer.\n\u003Cimg src=\"https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExY2xpOXZnOGx2dDNjd3h2dG9yY2tsc3B3YjMxYTNvdjJ4OXFxcnZrbyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3FQxaJJkQR8U4gdzr0/giphy.gif\" alt=\"Endgame quote giphy\">\u003C/p> \u003Cp data-svelte-h=\"svelte-1sa52mv\">I’m going to use Hashicorp’s \u003Ca href=\"https://github.com/hashicorp/http-echo\" rel=\"nofollow\">http-echo\u003C/a> docker image as our application. To see ArgoCD in action, we’ll iterate over a few versions of this image starting with \u003Ccode>v0.2.3\u003C/code>. Go ahead and add the deployment and service definitions.\u003C/p> \u003Ch5 data-svelte-h=\"svelte-19xfu2n\">Deployment:\u003C/h5> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># /Users/Parth/Dev/local-argo/foo-repo/apps/test-app/deployment.yaml\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> apps/v1\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Deployment\n\u003Cspan class=\"token key atrule\">metadata\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> nginx\u003Cspan class=\"token punctuation\">-\u003C/span>dummy\u003Cspan class=\"token punctuation\">-\u003C/span>app\n\u003Cspan class=\"token key atrule\">spec\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">replicas\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\n  \u003Cspan class=\"token key atrule\">selector\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token key atrule\">matchLabels\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token key atrule\">app\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> nginx\u003Cspan class=\"token punctuation\">-\u003C/span>dummy\n  \u003Cspan class=\"token key atrule\">template\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token key atrule\">metadata\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token key atrule\">labels\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n        \u003Cspan class=\"token key atrule\">app\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> nginx\u003Cspan class=\"token punctuation\">-\u003C/span>dummy\n    \u003Cspan class=\"token key atrule\">spec\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token key atrule\">containers\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">image\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> hashicorp/http\u003Cspan class=\"token punctuation\">-\u003C/span>echo\u003Cspan class=\"token punctuation\">:\u003C/span>0.2.3\n        \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> nginx\u003Cspan class=\"token punctuation\">-\u003C/span>dummy\n        \u003Cspan class=\"token key atrule\">args\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n        \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token string\">\"-text=foo\"\u003C/span>\n        \u003Cspan class=\"token key atrule\">ports\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n        \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">containerPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">80\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Ch5 data-svelte-h=\"svelte-1h5o4ej\">Service:\u003C/h5> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># /Users/Parth/Dev/local-argo/foo-repo/apps/test-app/svc.yaml\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> v1\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Service\n\u003Cspan class=\"token key atrule\">metadata\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">name\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> nginx\u003Cspan class=\"token punctuation\">-\u003C/span>dummy\u003Cspan class=\"token punctuation\">-\u003C/span>svc\n\u003Cspan class=\"token key atrule\">spec\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token key atrule\">ports\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">port\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">80\u003C/span>\n    \u003Cspan class=\"token key atrule\">targetPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">80\u003C/span>\n  \u003Cspan class=\"token key atrule\">selector\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n    \u003Cspan class=\"token key atrule\">app\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> nginx\u003Cspan class=\"token punctuation\">-\u003C/span>dummy\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-16ri73g\">Make sure you do a \u003Ccode>git add\u003C/code> and \u003Ccode>git commit\u003C/code> to our foo repo.\u003C/p> \u003Cp data-svelte-h=\"svelte-ea0y3u\">With this, deploying ArgoCD along with our app, essentially becomes the following commands:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">kubectl create \u003Cspan class=\"token parameter variable\">-k\u003C/span> /Users/Parth/Dev/local-argo/k8s/overlays/dev\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-hb0h5x\">\u003Cstrong>Note\u003C/strong> You might see an error like below:\u003C/p> \u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">error: resource mapping not found for name: &quot;my-app&quot; namespace: &quot;argocd&quot; from &quot;k8s/overlays/dev&quot;: no matches for kind &quot;Application&quot; in version &quot;argoproj.io/v1alpha1&quot;\nensure CRDs are installed first\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1y9bm5n\">Run \u003Ccode>kubectl apply -k /Users/Parth/Dev/local-argo/k8s/overlays/dev\u003C/code> and that should fix it.\u003C/p> \u003Cp data-svelte-h=\"svelte-1dp16qu\">You should now see that ArgoCD picked up our manifests and has started deploying it:\n\u003Cimg src=\"/argocd-deploy-v023.png\" alt=\"ArgoCD app screenshot\">\u003C/p> \u003Cp data-svelte-h=\"svelte-flrjjq\">Now lets bump up the version. Update the \u003Ccode>image\u003C/code> from \u003Ccode>0.2.3\u003C/code> to \u003Ccode>1.0.0\u003C/code>. You may have to hit the refresh button to see the effect: our current app pod gets terminated and a new one with the latest version gets created.\n\u003Cimg src=\"/argocd-deploy-v100.png\" alt=\"ArgoCD app screenshot\">\u003C/p> \u003Cp data-svelte-h=\"svelte-il5ez9\">Finally, to tear everything down:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">kubectl delete \u003Cspan class=\"token parameter variable\">-k\u003C/span> /Users/Parth/Dev/local-argo/k8s/overlays/dev\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>",slug:"LocalArgocd"},{title:"Kind on local machine",date:"2024-04-23",draft:false,summary:"Build and run a lightweight Kubernetes cluster on your machine",tags:["containers","k8s","kind"],content:"\u003Cp data-svelte-h=\"svelte-f6rzge\">I’m a big proponent of local testing. Being able to test a piece of code or configuration locally greatly increases developement and deployment speed. Its better to fail fast, and, in a sandboxed/controlled environment before deploying in production. Finally it also serves as a way to tinker (and break stuff) and learn.\u003C/p> \u003Cp data-svelte-h=\"svelte-qhcmb2\">Most of the applications I write and deploy end up being packaged as container images and run on orchestration platforms like Docker or Kubernetes. I’ve found a local Kubernetes cluster to be a life saver and a great way to expand my learning.\u003C/p> \u003Ch2 data-svelte-h=\"svelte-4sbb5r\">My Local machine (specs that matter)\u003C/h2> \u003Cp data-svelte-h=\"svelte-knkh8c\">\u003Cstrong>OS\u003C/strong>: MacOS Sonoma\u003Cbr> \u003Cstrong>Processor Arch\u003C/strong>: Apple Silicon (M1, i.e. 64-bit ARM)\u003C/p> \u003Ch2 data-svelte-h=\"svelte-136tnhu\">Installation\u003C/h2> \u003Cp data-svelte-h=\"svelte-e8s31t\">On Mac its as simple as \u003Ccode>brew install kind\u003C/code>. For alternatives check the Kind docs \u003Ca href=\"https://kind.sigs.k8s.io/docs/user/quick-start#installation\" rel=\"nofollow\">here\u003C/a>. In addition you’d want to have the following installed: Docker or an alternative runtime, and, kubectl.\u003C/p> \u003Ch3 data-svelte-h=\"svelte-l42sja\">Pre-requisites\u003C/h3> \u003Ch4 data-svelte-h=\"svelte-10fjmix\">Container runtime: Docker\u003C/h4> \u003Cp data-svelte-h=\"svelte-me7311\">Ensure you have Docker (Desktop, since this is a mac setup) installed as well. This is because Kind uses Docker containers by default to “emulate” Kubernetes nodes. This will add some additional complexity in our configuration and we shall see that shortly in the form of \u003Ccode>extraPortMappings\u003C/code> when defining our cluster config YAMLs. In summary, bear in mind your Kubernetes nodes are containers acting as if they are nodes. You can download the Docker desktop dmg from \u003Ca href=\"https://www.docker.com/products/docker-desktop/\" rel=\"nofollow\">here\u003C/a> and install it.\u003C/p> \u003Cp data-svelte-h=\"svelte-1m8004a\">If you are running this on your work Macbook or for another reason you don’t have Docker desktop license you can consider an alternative like \u003Ca href=\"https://github.com/abiosoft/colima\" rel=\"nofollow\">Colima\u003C/a>. \u003Ca href=\"https://jacobtomlinson.dev/posts/2022/goodbye-docker-desktop-for-mac-hello-colima/\" rel=\"nofollow\">Here’s\u003C/a> a great post on getting started on Colima. If using this approach, we have yet another “layer” to our setup: Colima spins up VM(s) with the Docker (by default) daemon running. This VM runs Docker containers that will emulate our Kubernetes nodes.\u003C/p> \u003Cp data-svelte-h=\"svelte-17vqrl4\">If you took the Docker desktop route, ensure it is running at this point.\u003C/p> \u003Cp data-svelte-h=\"svelte-yc0ik7\">If you took the Colima route, start the Colima VM using:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">\u003Cspan class=\"token comment\"># Use host networking for the VM, use 3 vCPUs, 6GiB of memory and OS architecture as arm64\u003C/span>\ncolima start --network-address \u003Cspan class=\"token parameter variable\">--cpu\u003C/span> \u003Cspan class=\"token number\">3\u003C/span> \u003Cspan class=\"token parameter variable\">--memory\u003C/span> \u003Cspan class=\"token number\">6\u003C/span> \u003Cspan class=\"token parameter variable\">--arch\u003C/span> arm64\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1pgcg23\">\u003Cem>\u003Cstrong>Note: Change the \u003Ccode>--arch\u003C/code> to the architecture of your choice and ensure you pull images for it\u003C/strong>\u003C/em>\u003C/p> \u003Cp data-svelte-h=\"svelte-1puip81\">Here are some useful colima commands:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">colima list   \u003Cspan class=\"token comment\"># List your VM(s)\u003C/span>\ncolima status\ncolima stop   \u003Cspan class=\"token comment\"># Stop your VM\u003C/span>\ncolima \u003Cspan class=\"token function\">ssh\u003C/span>    \u003Cspan class=\"token comment\"># SSH into your colima VM\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Ch4 data-svelte-h=\"svelte-1ymc1wh\">Interacting with the cluster: kubectl\u003C/h4> \u003Cp data-svelte-h=\"svelte-gyew37\">\u003Ca href=\"https://kubernetes.io/docs/tasks/tools/\" rel=\"nofollow\">Kubectl\u003C/a> is a cli that is most commonly used to inteact with your cluster via the Kube API server. Installing it is as simple as \u003Ccode>brew install kubectl\u003C/code>. For alternatives check the docs \u003Ca href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl-macos/\" rel=\"nofollow\">here\u003C/a>\u003C/p> \u003Ch2 data-svelte-h=\"svelte-d01id0\">Creating a cluster\u003C/h2> \u003Cp data-svelte-h=\"svelte-bzt8sq\">For a simple exercise you could just run a single node that runs both the control plane and the worker nodes, i.e. a single node.\u003C/p> \u003Cp data-svelte-h=\"svelte-pew14f\">Simple single node setup:\u003C/p> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># kind-cluster.yaml\u003C/span>\n\u003Cspan class=\"token comment\">## Single node\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> kind.x\u003Cspan class=\"token punctuation\">-\u003C/span>k8s.io/v1alpha4\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Cluster\n\u003Cspan class=\"token key atrule\">nodes\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">role\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> control\u003Cspan class=\"token punctuation\">-\u003C/span>plane\n    \u003Cspan class=\"token key atrule\">extraPortMappings\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">containerPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">30001\u003C/span>\n        \u003Cspan class=\"token key atrule\">hostPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">37899\u003C/span>\n        \u003Cspan class=\"token key atrule\">protocol\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> TCP\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-ygorka\">Two node setup (1x Control plane and 1x worker nodes, with storage):\u003C/p> \u003Cpre class=\"language-yaml\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-yaml\">\u003Cspan class=\"token comment\"># kind-cluster.yaml\u003C/span>\n\u003Cspan class=\"token comment\">## Two nodes - 1 control plane, 1 worker\u003C/span>\n\u003Cspan class=\"token key atrule\">apiVersion\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> kind.x\u003Cspan class=\"token punctuation\">-\u003C/span>k8s.io/v1alpha4\n\u003Cspan class=\"token key atrule\">kind\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> Cluster\n\u003Cspan class=\"token key atrule\">nodes\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n  \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">role\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> control\u003Cspan class=\"token punctuation\">-\u003C/span>plane\n    \u003Cspan class=\"token key atrule\">extraPortMappings\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">containerPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">30001\u003C/span>\n        \u003Cspan class=\"token key atrule\">hostPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">37899\u003C/span>\n        \u003Cspan class=\"token key atrule\">protocol\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> TCP\n  \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">role\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> worker\n    \u003Cspan class=\"token key atrule\">extraPortMappings\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n      \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">containerPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">30001\u003C/span>\n        \u003Cspan class=\"token key atrule\">hostPort\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> \u003Cspan class=\"token number\">37898\u003C/span>\n        \u003Cspan class=\"token key atrule\">protocol\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> TCP\n    \u003Cspan class=\"token key atrule\">extraMounts\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span>\n        \u003Cspan class=\"token punctuation\">-\u003C/span> \u003Cspan class=\"token key atrule\">hostPath\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> /Users/parth/k8s/cluster\u003Cspan class=\"token punctuation\">-\u003C/span>0xuh/storage\n          \u003Cspan class=\"token key atrule\">containerPath\u003C/span>\u003Cspan class=\"token punctuation\">:\u003C/span> /files \u003Cspan class=\"token comment\"># Since kind nodes are actualy (docker) containers\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cul data-svelte-h=\"svelte-1nn665k\">\u003Cli>\u003Ccode>extraPortMappings\u003C/code> specifies configuration that helps direct traffic from the host (your machine) to the node (docker container running as k8s node)\u003C/li> \u003Cli>\u003Ccode>containerPort\u003C/code> specifies the port your container running as K8s node will expose ; You’d want your application pod to listen on this port as well\u003C/li> \u003Cli>\u003Ccode>hostPort\u003C/code> specifies the port your host will host will expose; You’d use this port on your local browser to visit your application GUI or specify in your terminal command if using a CLI\u003C/li> \u003Cli>\u003Ccode>extraMounts\u003C/code> specifies configuration that helps us share one or more host (your machine) directories to our nodes\u003C/li> \u003Cli>\u003Ccode>hostPath\u003C/code> is the dir on the host; Contents of this dir would be available to the host under \u003Ccode>/files\u003C/code> (i.e. \u003Ccode>(root)/files\u003C/code>)\u003C/li> \u003Cli>\u003Ccode>containerPath\u003C/code> is the dir on our K8s node (which is actually a Docker container)\u003C/li>\u003C/ul> \u003Cp data-svelte-h=\"svelte-1ve7sgj\">The \u003Ccode>extraPortMappings\u003C/code> along with \u003Ccode>containerPort\u003C/code> and \u003Ccode>hostPort\u003C/code> allow us to use containers as nodes by setting up port forwarding. When setting up a K8s service for instance, you would set up your \u003Ccode>NodePort\u003C/code> same as \u003Ccode>containerPort\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-1xhnsc8\">That’s it. Use this command to create the cluster:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">kind create cluster \u003Cspan class=\"token parameter variable\">--name\u003C/span> playground \u003Cspan class=\"token parameter variable\">--config\u003C/span> kind-cluster.yaml\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1bd5zfg\">And to teardown:\u003C/p> \u003Cpre class=\"language-bash\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-bash\">kind delete cluster \u003Cspan class=\"token parameter variable\">--name\u003C/span> playground\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-15vpik0\">Changes to the cluster configuration would need a cluster teardown and recreation.\u003C/p>",slug:"Localkindcluster"},{title:"Multi sort in Go",date:"2023-12-13",draft:false,summary:"How does sorting on multiple fields work in Go?",tags:["go","multisort"],content:"\u003Cp data-svelte-h=\"svelte-10gy28v\">While recently working on an piece of Go code I found myself wondering: how can you sort by multiple fields? Imagine you have a struct slice and you want to sort it based on multiple fields of the struct.\u003C/p> \u003Cp data-svelte-h=\"svelte-mam56q\">Here’s an example of a struct representing a simple bank account:\u003C/p> \u003Cpre class=\"language-go\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-go\">\u003Cspan class=\"token keyword\">type\u003C/span> Account \u003Cspan class=\"token keyword\">struct\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\tAccountID    \u003Cspan class=\"token builtin\">int\u003C/span>\n\tBalance      \u003Cspan class=\"token builtin\">int\u003C/span>\n\tLastUpdated  \u003Cspan class=\"token builtin\">int\u003C/span>\n\tCreated      \u003Cspan class=\"token builtin\">int\u003C/span>\n\tTransactions \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token builtin\">int\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1a1fjft\">And a slice of the \u003Ccode>Account\u003C/code> struct:\u003C/p> \u003Cpre class=\"language-go\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-go\">\u003Cspan class=\"token keyword\">var\u003C/span> accounts \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>Account\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-7nlv1w\">We want to sort the \u003Ccode>accounts\u003C/code> slice by the Balance field and if Balance is the same then by AccountID.\u003C/p> \u003Cp data-svelte-h=\"svelte-1ugomnq\">Lets take a simple case first: sort all the accounts by their \u003Ccode>Balance\u003C/code> in decending order:\u003C/p> \u003Cpre class=\"language-go\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-go\">sort\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Slice\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>accounts\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token keyword\">func\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>i\u003Cspan class=\"token punctuation\">,\u003C/span>j \u003Cspan class=\"token builtin\">int\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token builtin\">bool\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> accounts\u003Cspan class=\"token punctuation\">[\u003C/span>i\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>Balance \u003Cspan class=\"token operator\">>\u003C/span> accounts\u003Cspan class=\"token punctuation\">[\u003C/span>j\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>Balance\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-xvggn8\">Here the helper function returns true if the account at index \u003Ccode>i\u003C/code> in the slice has balance greater than account at index \u003Ccode>j\u003C/code>.\u003C/p> \u003Cp data-svelte-h=\"svelte-6kr7ee\">Now coming to the actual problem:\u003C/p> \u003Cpre class=\"language-go\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-go\">sort\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Slice\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>accounts\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token keyword\">func\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>i\u003Cspan class=\"token punctuation\">,\u003C/span>j \u003Cspan class=\"token builtin\">int\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token builtin\">bool\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">if\u003C/span> accounts\u003Cspan class=\"token punctuation\">[\u003C/span>i\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>Balance \u003Cspan class=\"token operator\">==\u003C/span> accounts\u003Cspan class=\"token punctuation\">[\u003C/span>j\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>Balance \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">return\u003C/span> accounts\u003Cspan class=\"token punctuation\">[\u003C/span>i\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>AccountID \u003Cspan class=\"token operator\">>\u003C/span> accounts\u003Cspan class=\"token punctuation\">[\u003C/span>j\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>AccountID\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">return\u003C/span> accounts\u003Cspan class=\"token punctuation\">[\u003C/span>i\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>Balance \u003Cspan class=\"token operator\">>\u003C/span> accounts\u003Cspan class=\"token punctuation\">[\u003C/span>j\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>Balance\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre> \u003Cp data-svelte-h=\"svelte-1rtn04o\">Thats it! We start by setting up the helper function in a similar fashion but add an if condition: If the balances are same then sort (descending) by \u003Ccode>AccountId\u003C/code>. But if the balances are not the same then sort it as per previously - by \u003Ccode>Balance\u003C/code>.\u003C/p>",slug:"MultisortInGo"},{title:"Hello world!",date:"2023-12-01",draft:false,summary:"Is this thing up?",tags:["foobar","sveltekit","tailwindcss"],type:"post",content:"\u003Cp data-svelte-h=\"svelte-19571kz\">This website has been in the making for a while. My initial explorations were setups using Jekyll and Hugo. Both are extremely versatile and have quite a bit of fan following on the web (check out the amount of templates that are out there for Hugo). While Hugo was extremely easy to get boilerplate code going, Jekyll needed a bit more familiarization. While I don’t have any strong opinions against either of them, they just didn’t feel right for my needs.\u003C/p> \u003Cp data-svelte-h=\"svelte-1ytdun3\">Until I found SvelteKit. It felt simple yet powerful. As a backend person, I loved how layouts, pages, script and styles all tied together. You could have a site wide overall layout but also one for each page. It felt easy to digest how the load function worked and passed data back to the pages. The tutorials were/are great (I haven’t yet explored them in their entirety) and I kept coming back for more while reading them. And before I knew it, I had a skeleton up and running on my local dev server.\u003C/p> \u003Cp data-svelte-h=\"svelte-zqex2m\">The next good find was tailwindcss. The simplicity and power of customization really help put the focus back on design and development. The CSS classes felt utilitarian and easy to remember.\u003C/p> \u003Cp data-svelte-h=\"svelte-x0cx0b\">If I have to be specific, both have a common point going for them which is - great documentation. As a developer this is one of the most important factor while adopting a new framework/language or technology. I’ve still just touched the tips of both the technological icebergs and there’s lots more to learn. But I’m loving the results so far and willing to see how far I can explore.\u003C/p> \u003Cp data-svelte-h=\"svelte-17aue00\">“Frameworks are not tools for organising your code, they are tools for organising your mind” - YGLF 2019: Rich Harris - Rethinking reactivity\u003C/p>",slug:"Helloworld"}]},"uses":{}}];

					Promise.all([
						import("./_app/immutable/entry/start.WbSJy2CG.js"),
						import("./_app/immutable/entry/app.D3UXxyEl.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 4],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
